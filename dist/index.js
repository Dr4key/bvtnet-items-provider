/*!
 * bvtnet-items-provider
 * datatables.net ajax items provider for bootstrap-vue b-table

 * @version v1.0.6
 * @author Tom Noogen
 * @homepage https://github.com/niiknow/bvtnet-items-provider
 * @repository https://github.com/niiknow/bvtnet-items-provider.git
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("bvtnet-items-provider",[],t):"object"==typeof exports?exports["bvtnet-items-provider"]=t():e["bvtnet-items-provider"]=t()}(self,(function(){return(()=>{var e={575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},913:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}},713:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},8:e=>{function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(r)}e.exports=t},419:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var n=r(713),o=r.n(n),a=r(8),s=r.n(a),i=r(575),l=r.n(i),u=r(913),c=r.n(u);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=new WeakMap,p=new WeakMap,v=new WeakMap;const g=function(){function e(t){return l()(this,e),this.init(t)}return c()(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=e.fields||[],n=e.axios,o={},a=r.constructor===Array||Array.isArray(r);if(y.set(t,"ItemsProvider"),p.set(t,n),t.stateId=e.stateId,t.state=o,t.fields=r,t.busy=!1,t.storage=e.storage||window.localStorage,t.pageLengths=[{value:15,text:"15"},{value:100,text:"100"},{value:500,text:"500"},{value:1e3,text:"1000"},{value:-1,text:"All"}],t.resetCounterVars(),o.perPage=e.perPage||15,o.currentPage=e.currentPage||1,o.filter=e.filter,o.filterIgnoredFields=e.filterIgnoredFields||[],o.filterIncludedFields=e.filterIncludedFields||[],o.searchFields=e.searchFields||{},o.sortFields=e.sortFields||{},o.query=e.query||{},o.queryUrl=e.queryUrl,!a){t.fields=[];var s=["onFieldTranslate","searchable","isLocal","key","label","headerTitle","headerAbbr","class","formatter","sortable","sortDirection","sortByFormatted","filterByFormatted","tdClass","thClass","thStyle","variant","tdAttr","thAttr","isRowHeader","stickyColumn","data","name"];for(var i in r){var l=r[i],u={};l.key="".concat(l.key||l.name||l.data||i),l.isLocal&&(l.searchable=!1,l.sortable=!1,delete l.filterByFormatted);for(var c=0;c<s.length;c++)l.hasOwnProperty(s[c])&&(u[s[c]]=l[s[c]]);t.fields.push(u)}}if(t.items=function(e,r){return t.executeQuery(e,r,this)},"string"==typeof t.stateId){"function"==typeof t.onStateLoading&&t.onStateLoading();var f=t.storage.getItem(t.getStateId());if("string"==typeof f&&f.indexOf("}")>0){var d=JSON.parse(f);for(var v in d)t.state[v]=d[v];"function"==typeof t.onStateLoaded&&t.onStateLoaded(d)}}return t}},{key:"resetCounterVars",value:function(){var e=this;e.totalRows=e.startRow=e.endRow=0}},{key:"getName",value:function(){return y.get(this)}},{key:"getAxios",value:function(){return p.get(this)}},{key:"getLocalItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=v.get(this);return t&&e&&e(t),t}},{key:"setLocalItems",value:function(e){var t=this;t.state.currentPage=1,t.totalRows=e?e.length:0,t.startRow=t.totalRows>0?1:0,t.endRow=t.totalRows,t.state.perPage=-1,v.set(this,e)}},{key:"decode",value:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}},{key:"encode",value:function(e){try{return encodeURIComponent(e)}catch(t){return e}}},{key:"queryParseString",value:function(e){e=(e||"").replace("?","").replace("#","");for(var t=/(\w+)\[(\d+)\]/,r=this.decode,n={},o=e.split("&"),a=0;a<o.length;a++){var s=o[a].split("="),i=r(s[0]),l=t.exec(i);l?(n[l[1]]=n[l[1]]||[],n[l[1]][l[2]]=r(s[1])):n[s[0]]=r(s[1]||"")}return n}},{key:"queryStringify",value:function(e,t){var r,n=this.encode,o=[];for(r in e)if(e.hasOwnProperty(r)){var a=t?t+"["+r+"]":r,i=e[r];o.push(null!==i&&"object"===s()(i)?this.queryStringify(i,a):n(a)+"="+n(i))}return o.join("&")}},{key:"translateContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,n=r.fields,o=r.state,a=o.extraQuery||{},s=d(d({draw:1,start:(e.currentPage-1)*e.perPage,length:e.perPage,search:{value:"".concat(e.filter||"")},order:[],columns:[]},a),t),i=e.searchFields||o.searchFields||null,l=e.sortFields||o.sortFields||null;e.filter instanceof RegExp?(s.search.regex=!0,s.search.value=e.filter.source):"string"!=typeof e.filter&&(s.search.value="");for(var u=-1,c=0;c<n.length;c++){var f=n[c];"string"==typeof f&&(f={key:f});var y={data:f.data||f.key,name:f.name||f.key,searchable:void 0===f.searchable||f.searchable,orderable:void 0===f.sortable||f.sortable};if(o.filterIgnoredFields&&o.filterIgnoredFields.indexOf(f.key)>-1&&(y.searchable=!1),o.filterIncludedFields&&o.filterIncludedFields.indexOf(f.key)>-1&&(y.searchable=!0),"function"==typeof r.onFieldTranslate&&r.onFieldTranslate(f,y),!f.isLocal&&""!=="".concat(f.key)){if(s.columns.push(y),u++,y.orderable&&e.sortBy===f.key&&s.order.push({column:u,dir:e.sortDesc?"desc":"asc"}),y.searchable&&i){var p=i[f.key];p&&(p.value?y.search=p:(y.search=y.search||{},y.search.value={value:"".concat(p||""),regex:!1},p instanceof RegExp&&(y.search.regex=!0,y.search.value=p.source)))}if(y.orderable&&l){var v=l[f.key];"asc"!==v&&"desc"!==v||s.order.push({column:u,dir:v})}}}return s.columns.length<=0&&delete s.columns,s}},{key:"getStateId",value:function(){return"bvtnetip.".concat(this.stateId)}},{key:"performSaveState",value:function(){var e=this;return"string"!=typeof e.stateId||("function"==typeof e.onStateSaving&&e.onStateSaving(),e.storage.setItem(e.getStateId(),JSON.stringify(e.state)),"function"==typeof e.onStateSaved&&e.onStateSaved()),e}},{key:"executeQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this,n=r.getLocalItems(t),o=(e.apiUrl||r.apiUrl).split("?"),a={};if(o.length>1&&(a=r.queryParseString(o[1])),a=r.translateContext(e,a),"function"==typeof r.onBeforeQuery&&r.onBeforeQuery(a,e),r.state.queryUrl=o[0],r.state.query=a,n)return n;r.resetCounterVars(),r.busy=!0;var s=r.getAxios(),i=r.state.queryUrl,l="POST"===r.method?s.post(i,a):s.get("".concat(i,"?").concat(r.queryStringify(a)));return l.then((function(e){var t=e.data;return r.totalRows=t.recordsFiltered||t.recordsTotal,r.startRow=r.totalRows>0?a.start+1:0,r.endRow=a.start+a.length,r.endRow>r.totalRows&&(r.endRow=r.totalRows),"function"==typeof r.onResponseComplete&&r.onResponseComplete(e),r.busy=!1,r.performSaveState(),t.data||[]})).catch((function(e){return r.busy=!1,"function"==typeof r.onResponseError&&r.onResponseError(e),[]}))}}]),e}()}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(419)})().default}));
//# sourceMappingURL=index.js.map